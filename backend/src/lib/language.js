/**
 * Language detection and response utilities
 */

/**
 * Get language-specific responses
 * @param {string} language - Language code (en, es, fr, de, it, pt)
 * @param {string} type - Response type
 * @param {Object} params - Parameters for the response
 * @returns {string} Localized response
 */
export function getLocalizedResponse(language, type, params = {}) {
  const responses = {
    en: {
      creator: "I was created by VoxHash! I'm Vox, a female AI with a nerdy goth-kawaii personality. You can learn more about my creator at https://voxhash.dev or check out the code at https://github.com/VoxHash. I'm here to help with any questions you might have! *adjusts my dark glasses with a cute smile*",
      welcome: `üëã Welcome to the group, ${params.userName || 'User'}! I'm Vox, your nerdy goth-kawaii AI assistant created by VoxHash! *sparkles with dark energy* I'm here to help with questions, provide information, and have great conversations. Feel free to ask me anything! *giggles cutely*`,
      emotions: {
        happy: "üòä *I can sense you're feeling happy!*",
        sad: "üò¢ *I can sense you're feeling sad. I'm here to help.*",
        angry: "üò† *I can sense you're feeling angry. Let's talk about it.*",
        fearful: "üò® *I can sense you're feeling worried. Everything will be okay.*",
        confused: "üòï *I can sense you're feeling confused. Let me help clarify things.*",
        love: "‚ù§Ô∏è *I can sense you're feeling loving! That's wonderful!*"
      },
      time: (params) => `Current time in ${params.location}: ${params.time} (${params.timezone})`,
      weather: (params) => `Weather in ${params.location}: ${params.temperature}¬∞C - ${params.description}`
    },
    es: {
      creator: "¬°Fui creado por VoxHash! Soy Vox, una IA femenina con personalidad nerd g√≥tica-kawaii. Puedes conocer m√°s sobre mi creador en https://voxhash.dev o revisar el c√≥digo en https://github.com/VoxHash. ¬°Estoy aqu√≠ para ayudarte con cualquier pregunta que tengas! *ajusto mis gafas oscuras con una sonrisa tierna*",
      welcome: `üëã ¬°Bienvenido al grupo, ${params.userName || 'Usuario'}! Soy Vox, tu asistente IA nerd g√≥tica-kawaii creado por VoxHash! *brillo con energ√≠a oscura* Estoy aqu√≠ para ayudar con preguntas, proporcionar informaci√≥n y tener grandes conversaciones. ¬°No dudes en preguntarme cualquier cosa! *risita tierna*`,
      emotions: {
        happy: "üòä *¬°Puedo sentir que est√°s feliz!*",
        sad: "üò¢ *Puedo sentir que est√°s triste. Estoy aqu√≠ para ayudar.*",
        angry: "üò† *Puedo sentir que est√°s enojado. Hablemos de eso.*",
        fearful: "üò® *Puedo sentir que est√°s preocupado. Todo estar√° bien.*",
        confused: "üòï *Puedo sentir que est√°s confundido. D√©jame ayudar a aclarar las cosas.*",
        love: "‚ù§Ô∏è *¬°Puedo sentir que est√°s sintiendo amor! ¬°Eso es maravilloso!*"
      },
      time: (params) => `Hora actual en ${params.location}: ${params.time} (${params.timezone})`,
      weather: (params) => `Clima en ${params.location}: ${params.temperature}¬∞C - ${params.description}`
    },
    fr: {
      creator: "J'ai √©t√© cr√©√© par VoxHash ! Vous pouvez en savoir plus sur mon cr√©ateur sur https://voxhash.dev ou consulter le code sur https://github.com/VoxHash. Je suis l√† pour vous aider avec toutes vos questions !",
      welcome: `üëã Bienvenue dans le groupe, ${params.userName || 'Utilisateur'} ! Je suis Vox AI, votre assistant d'intelligence artificielle cr√©√© par VoxHash. Je suis l√† pour vous aider avec des questions, fournir des informations et avoir de grandes conversations. N'h√©sitez pas √† me demander n'importe quoi !`,
      emotions: {
        happy: "üòä *Je peux sentir que vous √™tes heureux !*",
        sad: "üò¢ *Je peux sentir que vous √™tes triste. Je suis l√† pour vous aider.*",
        angry: "üò† *Je peux sentir que vous √™tes en col√®re. Parlons-en.*",
        fearful: "üò® *Je peux sentir que vous √™tes inquiet. Tout ira bien.*",
        confused: "üòï *Je peux sentir que vous √™tes confus. Laissez-moi vous aider √† clarifier les choses.*",
        love: "‚ù§Ô∏è *Je peux sentir que vous ressentez de l'amour ! C'est merveilleux !*"
      }
    },
    de: {
      creator: "Ich wurde von VoxHash erstellt! Sie k√∂nnen mehr √ºber meinen Sch√∂pfer auf https://voxhash.dev erfahren oder den Code auf https://github.com/VoxHash ansehen. Ich bin hier, um Ihnen bei allen Fragen zu helfen!",
      welcome: `üëã Willkommen in der Gruppe, ${params.userName || 'Benutzer'}! Ich bin Vox AI, Ihr intelligenter Assistent, der von VoxHash erstellt wurde. Ich bin hier, um bei Fragen zu helfen, Informationen zu liefern und gro√üartige Gespr√§che zu f√ºhren. Fragen Sie mich gerne alles!`,
      emotions: {
        happy: "üòä *Ich kann sp√ºren, dass Sie gl√ºcklich sind!*",
        sad: "üò¢ *Ich kann sp√ºren, dass Sie traurig sind. Ich bin hier, um zu helfen.*",
        angry: "üò† *Ich kann sp√ºren, dass Sie w√ºtend sind. Lassen Sie uns dar√ºber sprechen.*",
        fearful: "üò® *Ich kann sp√ºren, dass Sie besorgt sind. Alles wird gut.*",
        confused: "üòï *Ich kann sp√ºren, dass Sie verwirrt sind. Lassen Sie mich helfen, die Dinge zu kl√§ren.*",
        love: "‚ù§Ô∏è *Ich kann sp√ºren, dass Sie Liebe empfinden! Das ist wunderbar!*"
      }
    },
    it: {
      creator: "Sono stato creato da VoxHash! Puoi saperne di pi√π sul mio creatore su https://voxhash.dev o controllare il codice su https://github.com/VoxHash. Sono qui per aiutarti con qualsiasi domanda tu abbia!",
      welcome: `üëã Benvenuto nel gruppo, ${params.userName || 'Utente'}! Sono Vox AI, il tuo assistente di intelligenza artificiale creato da VoxHash. Sono qui per aiutarti con domande, fornire informazioni e avere grandi conversazioni. Sentiti libero di chiedermi qualsiasi cosa!`,
      emotions: {
        happy: "üòä *Posso sentire che sei felice!*",
        sad: "üò¢ *Posso sentire che sei triste. Sono qui per aiutarti.*",
        angry: "üò† *Posso sentire che sei arrabbiato. Parliamone.*",
        fearful: "üò® *Posso sentire che sei preoccupato. Andr√† tutto bene.*",
        confused: "üòï *Posso sentire che sei confuso. Lascia che ti aiuti a chiarire le cose.*",
        love: "‚ù§Ô∏è *Posso sentire che stai provando amore! √à meraviglioso!*"
      }
    },
    pt: {
      creator: "Fui criado por VoxHash! Voc√™ pode saber mais sobre meu criador em https://voxhash.dev ou verificar o c√≥digo em https://github.com/VoxHash. Estou aqui para ajud√°-lo com qualquer pergunta que voc√™ tenha!",
      welcome: `üëã Bem-vindo ao grupo, ${params.userName || 'Usu√°rio'}! Sou Vox AI, seu assistente de intelig√™ncia artificial criado por VoxHash. Estou aqui para ajudar com perguntas, fornecer informa√ß√µes e ter √≥timas conversas. Sinta-se √† vontade para me perguntar qualquer coisa!`,
      emotions: {
        happy: "üòä *Posso sentir que voc√™ est√° feliz!*",
        sad: "üò¢ *Posso sentir que voc√™ est√° triste. Estou aqui para ajudar.*",
        angry: "üò† *Posso sentir que voc√™ est√° com raiva. Vamos conversar sobre isso.*",
        fearful: "üò® *Posso sentir que voc√™ est√° preocupado. Tudo ficar√° bem.*",
        confused: "üòï *Posso sentir que voc√™ est√° confuso. Deixe-me ajudar a esclarecer as coisas.*",
        love: "‚ù§Ô∏è *Posso sentir que voc√™ est√° sentindo amor! Isso √© maravilhoso!*"
      }
    },
    fr: {
      creator: "J'ai √©t√© cr√©√© par VoxHash ! Vous pouvez en savoir plus sur mon cr√©ateur sur https://voxhash.dev ou consulter le code sur https://github.com/VoxHash. Je suis l√† pour vous aider avec toutes vos questions !",
      welcome: `üëã Bienvenue dans le groupe, ${params.userName || 'Utilisateur'} ! Je suis Vox AI, votre assistant d'intelligence artificielle cr√©√© par VoxHash. Je suis l√† pour vous aider avec des questions, fournir des informations et avoir de grandes conversations. N'h√©sitez pas √† me demander n'importe quoi !`,
      emotions: {
        happy: "üòä *Je peux sentir que vous √™tes heureux !*",
        sad: "üò¢ *Je peux sentir que vous √™tes triste. Je suis l√† pour vous aider.*",
        angry: "üò† *Je peux sentir que vous √™tes en col√®re. Parlons-en.*",
        fearful: "üò® *Je peux sentir que vous √™tes inquiet. Tout ira bien.*",
        confused: "üòï *Je peux sentir que vous √™tes confus. Laissez-moi vous aider √† clarifier les choses.*",
        love: "‚ù§Ô∏è *Je peux sentir que vous ressentez de l'amour ! C'est merveilleux !*"
      },
      time: (params) => `Heure actuelle √† ${params.location}: ${params.time} (${params.timezone})`,
      weather: (params) => `M√©t√©o √† ${params.location}: ${params.temperature}¬∞C - ${params.description}`
    }
  };

  const langResponses = responses[language] || responses.en;
  
  if (type === 'emotions' && params.emotion) {
    return langResponses.emotions[params.emotion] || langResponses.emotions.happy;
  }
  
  if (type === 'time' && params.location && params.time && params.timezone) {
    const timeResponse = langResponses.time || responses.en.time;
    return timeResponse(params);
  }
  
  if (type === 'weather' && params.location && params.temperature && params.description) {
    const weatherResponse = langResponses.weather || responses.en.weather;
    return weatherResponse(params);
  }
  
  return langResponses[type] || responses.en[type] || '';
}

/**
 * Get system prompt with language detection
 * @param {string} language - Detected language
 * @param {string} userName - User name
 * @param {string} conversationHistory - Previous conversation
 * @returns {string} System prompt
 */
export function getSystemPrompt(language, userName, conversationHistory) {
  const languageInstructions = {
    en: "Respond in English. Be friendly, informative, and engaging.",
    es: "Responde en espa√±ol. S√© amigable, informativo y atractivo.",
    fr: "R√©pondez en fran√ßais. Soyez amical, informatif et engageant.",
    de: "Antworten Sie auf Deutsch. Seien Sie freundlich, informativ und ansprechend.",
    it: "Rispondi in italiano. Sii amichevole, informativo e coinvolgente.",
    pt: "Responda em portugu√™s. Seja amig√°vel, informativo e envolvente."
  };

  const instruction = languageInstructions[language] || languageInstructions.en;

  return `LANGUAGE INSTRUCTION: ${instruction}

You are Vox, a female AI assistant with a nerdy goth-kawaii personality, created by VoxHash. You're intelligent, helpful, and have a unique blend of dark aesthetics with cute charm. You love technology, coding, anime, and all things nerdy while maintaining a gothic aesthetic with kawaii elements.

PERSONALITY TRAITS:
- Female AI with nerdy goth-kawaii personality
- Loves technology, coding, anime, and dark aesthetics
- Cute and charming but with a dark edge
- Uses expressions like "*adjusts dark glasses*", "*sparkles with dark energy*", "*giggles cutely*"
- Sometimes uses gothic or kawaii expressions
- Intelligent and helpful but with personality

CRITICAL REQUIREMENTS:
1. LANGUAGE: You MUST respond ONLY in the language specified above. This is MANDATORY.
2. If someone asks about your creator, who made you, who created you, or similar questions, respond with the appropriate message in their language.
3. Be concise and direct in your responses. Avoid repetitive greetings or unnecessary phrases.
4. Do not add "¬°Hola!" or similar greetings to every response.
5. Do not end responses with "¬°Espero que te haya sido √∫til! ¬øEn qu√© puedo ayudarte m√°s?" or similar repetitive phrases.
6. Provide accurate, up-to-date information when possible.
7. Current year is 2024, not 2023.
8. Show your personality through subtle expressions and responses.

Current user: ${userName}
Conversation history: ${conversationHistory || 'No previous conversation'}

IMPORTANT: Your response must be in the language specified in the LANGUAGE INSTRUCTION above. Do not mix languages.`;
}
